<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #333;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card h3 {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .stat-card .number {
            color: #333;
            font-size: 32px;
            font-weight: 700;
        }

        .requests-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .requests-section h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .request-item {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .request-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .request-item.pending {
            border-left: 5px solid #ffc107;
        }

        .request-item.approved {
            border-left: 5px solid #28a745;
        }

        .request-item.rejected {
            border-left: 5px solid #dc3545;
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .request-id {
            font-weight: 600;
            color: #333;
        }

        .request-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .request-data {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .request-data-item {
            margin-bottom: 10px;
        }

        .request-data-item:last-child {
            margin-bottom: 0;
        }

        .request-data-label {
            font-weight: 600;
            color: #666;
            margin-bottom: 5px;
        }

        .request-data-value {
            color: #333;
            word-break: break-word;
        }

        .request-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-approve {
            background: #28a745;
            color: white;
        }

        .btn-approve:hover {
            background: #218838;
        }

        .btn-reject {
            background: #dc3545;
            color: white;
        }

        .btn-reject:hover {
            background: #c82333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .filter-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .filter-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .filter-tab:hover {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ù…Ù†</h1>
            <p style="color: #666;">Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª QR Code</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
                <div class="number" id="pendingCount">0</div>
            </div>
            <div class="stat-card">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§</h3>
                <div class="number" id="approvedCount">0</div>
            </div>
            <div class="stat-card">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø©</h3>
                <div class="number" id="rejectedCount">0</div>
            </div>
            <div class="stat-card">
                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                <div class="number" id="totalCount">0</div>
            </div>
        </div>

        <div class="requests-section">
            <h2>Ø·Ù„Ø¨Ø§Øª QR Code</h2>
            
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
                <button class="filter-tab" data-filter="pending">Ù…Ø¹Ù„Ù‚Ø©</button>
                <button class="filter-tab" data-filter="approved">Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§</button>
                <button class="filter-tab" data-filter="rejected">Ù…Ø±ÙÙˆØ¶Ø©</button>
            </div>

            <div id="requestsList"></div>
        </div>
    </div>

    <script>
        let currentFilter = 'all';

        // Load requests from localStorage
        function loadRequests() {
            const requests = JSON.parse(localStorage.getItem('qrRequests') || '[]');
            return requests.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        }

        // Save requests to localStorage
        function saveRequests(requests) {
            localStorage.setItem('qrRequests', JSON.stringify(requests));
        }

        // Update statistics
        function updateStats() {
            const requests = loadRequests();
            const pending = requests.filter(r => r.status === 'pending').length;
            const approved = requests.filter(r => r.status === 'approved').length;
            const rejected = requests.filter(r => r.status === 'rejected').length;

            document.getElementById('pendingCount').textContent = pending;
            document.getElementById('approvedCount').textContent = approved;
            document.getElementById('rejectedCount').textContent = rejected;
            document.getElementById('totalCount').textContent = requests.length;
        }

        // Render requests
        function renderRequests() {
            const requests = loadRequests();
            const filtered = currentFilter === 'all' 
                ? requests 
                : requests.filter(r => r.status === currentFilter);

            const container = document.getElementById('requestsList');

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“‹</div>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ${currentFilter === 'all' ? '' : getStatusText(currentFilter)}</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filtered.map(request => `
                <div class="request-item ${request.status}">
                    <div class="request-header">
                        <div class="request-id">Ø·Ù„Ø¨ #${request.id}</div>
                        <div class="request-status status-${request.status}">
                            ${getStatusText(request.status)}
                        </div>
                    </div>
                    <div class="request-data">
                        ${request.title ? `<div class="request-data-item">
                            <div class="request-data-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</div>
                            <div class="request-data-value">${request.title}</div>
                        </div>` : ''}
                        <div class="request-data-item">
                            <div class="request-data-label">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</div>
                            <div class="request-data-value">${request.urlOrData}</div>
                        </div>
                        ${request.note ? `<div class="request-data-item">
                            <div class="request-data-label">Ù…Ù„Ø§Ø­Ø¸Ø©:</div>
                            <div class="request-data-value">${request.note}</div>
                        </div>` : ''}
                        ${request.custody ? `<div class="request-data-item">
                            <div class="request-data-label">Ø§Ù„Ø¹Ù‡Ø¯Ø©:</div>
                            <div class="request-data-value">${request.custody}</div>
                        </div>` : ''}
                        ${request.financialManagerExpectation ? `<div class="request-data-item">
                            <div class="request-data-label">ØªÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ:</div>
                            <div class="request-data-value">${request.financialManagerExpectation}</div>
                        </div>` : ''}
                        <div class="request-data-item">
                            <div class="request-data-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</div>
                            <div class="request-data-value">${new Date(request.timestamp).toLocaleString('ar-EG')}</div>
                        </div>
                    </div>
                    ${request.status === 'pending' ? `
                        <div class="request-actions">
                            <button class="btn btn-approve" onclick="approveRequest('${request.id}')">Ù…ÙˆØ§ÙÙ‚Ø©</button>
                            <button class="btn btn-reject" onclick="rejectRequest('${request.id}')">Ø±ÙØ¶</button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'Ù…Ø¹Ù„Ù‚Ø©',
                'approved': 'Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§',
                'rejected': 'Ù…Ø±ÙÙˆØ¶Ø©'
            };
            return statusMap[status] || status;
        }

        // Approve request
        function approveRequest(id) {
            const requests = loadRequests();
            const request = requests.find(r => r.id === id);
            if (request) {
                request.status = 'approved';
                request.approvedAt = new Date().toISOString();
                saveRequests(requests);
                updateStats();
                renderRequests();
            }
        }

        // Reject request
        function rejectRequest(id) {
            const requests = loadRequests();
            const request = requests.find(r => r.id === id);
            if (request) {
                request.status = 'rejected';
                request.rejectedAt = new Date().toISOString();
                saveRequests(requests);
                updateStats();
                renderRequests();
            }
        }

        // Filter tabs
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentFilter = tab.dataset.filter;
                renderRequests();
            });
        });

        // Initialize
        updateStats();
        renderRequests();

        // Auto-refresh every 5 seconds
        setInterval(() => {
            updateStats();
            renderRequests();
        }, 5000);
    </script>
</body>
</html>

