#!/bin/bash

# ุชุดุบูู ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงููุฌู
# Face Recognition Service Starter

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ     ุชุดุบูู ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงููุฌู                    โ"
echo "โ     Face Recognition Service                      โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

# ุงูุชุญูู ูู ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุชู ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ ุจูุฆุฉ ุงูุชุฑุงุถูุฉ
if [ ! -d "venv" ]; then
    echo "๐ฆ ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ..."
    python3 -m venv venv
fi

# ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
echo "๐ง ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ..."
source venv/bin/activate

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฅ ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip install -r requirements.txt --quiet

# ูุณุฎ ููู ุงูุฅุนุฏุงุฏุงุช ุฅุฐุง ูู ููู ููุฌูุฏุงู
if [ ! -f ".env" ]; then
    echo "๐ ูุณุฎ ููู ุงูุฅุนุฏุงุฏุงุช..."
    cp .env.example .env
fi

# ุชุดุบูู ุงูุฎุฏูุฉ
echo ""
echo "๐ ุชุดุบูู ุงูุฎุฏูุฉ..."
echo ""
python app.py

